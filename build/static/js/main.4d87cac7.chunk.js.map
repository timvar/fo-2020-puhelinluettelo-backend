{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","newPerson","post","id","delete","updatePerson","put","Notification","message","className","ErrorNotification","errorMessage","Filter","filter","handleChange","value","onChange","PersonForm","onSubmit","name","number","handleNameChange","handleNumberChange","type","Persons","persons","personFilter","handleRemovePerson","person","toLowerCase","includes","map","key","Person","onClick","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","notificationMessage","setNotificationMessage","errorNotificationMessage","setErrorNotificationMessage","useEffect","personService","then","response","data","event","target","preventDefault","undefined","find","concat","setTimeout","catch","error","window","confirm","join","ReactDOM","render","document","getElementById"],"mappings":"uPACMA,EAAU,eAkBD,EAhBA,WACb,OAAOC,IAAMC,IAAIF,IAeJ,EAZA,SAAAG,GACb,OAAQF,IAAMG,KAAKJ,EAASG,IAWf,EARA,SAAAE,GACb,OAAOJ,IAAMK,OAAN,UAAgBN,EAAhB,YAA2BK,KAOrB,EAJA,SAACA,EAAIE,GAClB,OAAON,IAAMO,IAAN,UAAaR,EAAb,YAAwBK,GAAME,ICZjCE,EAAe,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAgB,OAAZA,EACK,KAIP,yBAAKC,UAAU,WACZD,IAKDE,EAAoB,SAAC,GAAsB,IAApBC,EAAmB,EAAnBA,aAC3B,OAAqB,OAAjBA,EACK,KAIP,yBAAKF,UAAU,iBACZE,IAKDC,EAAS,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,aACxB,OACE,kDACoB,2BAAOC,MAAOF,EAAQG,SAAUF,MAKlDG,EAAa,SAAC,GAAsE,IAApEC,EAAmE,EAAnEA,SAAUC,EAAyD,EAAzDA,KAAMC,EAAmD,EAAnDA,OAAQC,EAA2C,EAA3CA,iBAAkBC,EAAyB,EAAzBA,mBAC9D,OACE,0BAAMJ,SAAUA,GACd,sCACQ,2BAAOH,MAAOI,EAAMH,SAAUK,KAEtC,wCACU,2BAAON,MAAOK,EAAQJ,SAAUM,KAE1C,6BACE,4BAAQC,KAAK,UAAb,UAMFC,EAAU,SAAC,GAAmD,IAAjDC,EAAgD,EAAhDA,QAASC,EAAuC,EAAvCA,aAAcC,EAAyB,EAAzBA,mBACxC,OAAOF,EACJZ,QAAO,SAAAe,GAAM,OAAIA,EAAOT,KAAKU,cAAcC,SAASJ,EAAaG,kBACjEE,KAAI,SAACH,GAAD,OAAY,kBAAC,EAAD,CAAQI,IAAKJ,EAAOT,KAAMS,OAAQA,EAAQD,mBAAoBA,QAI7EM,EAAS,SAAC,GAAoC,IAAlCL,EAAiC,EAAjCA,OAAQD,EAAyB,EAAzBA,mBACxB,OACE,+BAAKC,EAAOT,KAAZ,IAAmBS,EAAOR,OAA1B,IAAkC,4BAAQc,QAAS,kBAAMP,EAAmBC,EAAOzB,MAAjD,UAAlC,MA4HWgC,EAxHH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTX,EADS,KACAY,EADA,OAEcD,mBAAS,IAFvB,mBAETE,EAFS,KAEAC,EAFA,OAGkBH,mBAAS,IAH3B,mBAGTI,EAHS,KAGEC,EAHF,OAIkBL,mBAAS,IAJ3B,mBAITM,EAJS,KAIEC,EAJF,OAKsCP,mBAAS,MAL/C,mBAKTQ,EALS,KAKYC,EALZ,OAMgDT,mBAAS,MANzD,mBAMTU,EANS,KAMiBC,EANjB,KAQhBC,qBAAU,WACRC,IAEGC,MAAK,SAAAC,GACJd,EAAWc,EAASC,WAEvB,IAoFH,OACE,6BACE,yCACA,kBAAC,EAAD,CAAc5C,QAASoC,IACvB,kBAAC,EAAD,CAAmBjC,aAAcmC,IACjC,kBAAC,EAAD,CAAQjC,OAAQ6B,EAAW5B,aA/EJ,SAACuC,GAC1BV,EAAaU,EAAMC,OAAOvC,UA+ExB,yCACA,kBAAC,EAAD,CACEI,KAAMmB,EACNlB,OAAQoB,EACRnB,iBA5FmB,SAACgC,GACxBd,EAAWc,EAAMC,OAAOvC,QA4FpBO,mBAzFqB,SAAC+B,GAC1BZ,EAAaY,EAAMC,OAAOvC,QAyFtBG,SAlFoB,SAACmC,GACzBA,EAAME,iBACN,IAAMtD,EAAY,CAChBkB,KAAMmB,EACNlB,OAAQoB,QAG8CgB,IAApD/B,EAAQgC,MAAK,SAAA7B,GAAM,OAAIA,EAAOT,OAASmB,KACzCW,EACUhD,GACPiD,MAAK,SAAAC,GACJd,EAAWZ,EAAQiC,OAAOP,EAASC,OACnCP,EAAuB,SAAD,OAAUP,IAChCqB,YAAW,WACTd,EAAuB,QACtB,QAEJe,OAAM,SAAAC,GACLd,EAA4B,iBAAD,OAAkBT,EAAlB,mBAC3BqB,YAAW,WAAQZ,EAA4B,QAAU,QAGzDe,OAAOC,QAAP,UAAkBzB,EAAlB,6EACFW,EAEIxB,EACGZ,QAAO,SAAAe,GAAM,OAAIA,EAAOT,OAASmB,KACjCP,KAAI,SAAAH,GAAM,OAAIA,EAAOzB,MACxBF,GAEDiD,MAAK,WACJb,EAAWZ,EAAQM,KAAI,SAAAH,GAAM,OAAIA,EAAOT,OAASmB,EAAUrC,EAAY2B,MACvEiB,EAAuB,WAAD,OAAYP,EAAZ,8BAAyCE,IAC/DmB,YAAW,WACTd,EAAuB,QACtB,QAEJe,OAAM,SAAAC,GACHd,EAA4B,kBAAD,OAAmBT,EAAnB,2CAC7BqB,YAAW,WACTZ,EAA4B,QAC3B,KACHV,EAAWZ,EAAQZ,QAAO,SAAAe,GAAM,OAAIA,EAAOT,OAASmB,SAI5DC,EAAW,IACXE,EAAa,OAoCX,uCACA,kBAAC,EAAD,CACEhB,QAASA,EACTC,aAAcgB,EACdf,mBArCe,SAACxB,GAChB2D,OAAOC,QAAP,iBAAyBtC,EAAQZ,QAAO,SAAAe,GAAM,OAAIA,EAAOzB,KAAOA,KAAI4B,KAAI,SAAAH,GAAM,OAAIA,EAAOT,QAAM6C,OAA/F,QACFf,EACU9C,GACP+C,MAAK,WACJb,EAAWZ,EAAQZ,QAAO,SAAAe,GAAM,OAAIA,EAAOzB,KAAOA,MAClD0C,EAAuB,WAAD,OAAYpB,EAAQZ,QAAO,SAAAe,GAAM,OAAIA,EAAOzB,KAAOA,KAAI4B,KAAI,SAAAH,GAAM,OAAIA,EAAOT,QAAM6C,SACxGL,YAAW,WACTd,EAAuB,QACtB,QAEJe,OAAM,SAAAC,GACLd,EAA4B,oBAAD,OAAqBtB,EAAQZ,QAAO,SAAAe,GAAM,OAAIA,EAAOzB,KAAOA,KAAI4B,KAAI,SAAAH,GAAM,OAAIA,EAAOT,QAAM6C,OAA3F,oBAC3BL,YAAW,WACTZ,EAA4B,QAC3B,aC1JbkB,IAASC,OACL,kBAAC,EAAD,MACFC,SAASC,eAAe,W","file":"static/js/main.4d87cac7.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n}\n\nconst create = newPerson => {\n  return  axios.post(baseUrl, newPerson)\n}\n\nconst remove = id => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst update = (id, updatePerson) => {\n  return axios.put(`${baseUrl}/${id}`, updatePerson)\n}\n\nexport default {\n  getAll,\n  create,\n  remove,\n  update\n}\n","import React, { useState, useEffect } from 'react'\nimport './index.css'\nimport personService from './services/persons'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n}\n\nconst ErrorNotification = ({ errorMessage }) => {\n  if (errorMessage === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error-message\">\n      {errorMessage}\n    </div>\n  )\n}\n\nconst Filter = ({ filter, handleChange }) => {\n  return (\n    <div>\n      filter shown with <input value={filter} onChange={handleChange} />\n    </div>\n  )\n}\n\nconst PersonForm = ({ onSubmit, name, number, handleNameChange, handleNumberChange }) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input value={name} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={number} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Persons = ({ persons, personFilter, handleRemovePerson }) => {\n  return persons\n    .filter(person => person.name.toLowerCase().includes(personFilter.toLowerCase()))\n    .map((person) => <Person key={person.name} person={person} handleRemovePerson={handleRemovePerson} />)\n\n}\n\nconst Person = ({ person, handleRemovePerson }) => {\n  return (\n    <p> {person.name} {person.number} <button onClick={() => handleRemovePerson(person.id)} >delete</button> </p>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [notificationMessage, setNotificationMessage] = useState(null)\n  const [errorNotificationMessage, setErrorNotificationMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value);\n  }\n\n  const addOrUpdatePerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    };\n\n    if (persons.find(person => person.name === newName) === undefined) {\n      personService\n        .create(newPerson)\n        .then(response => {\n          setPersons(persons.concat(response.data));\n          setNotificationMessage(`Added ${newName}`);\n          setTimeout(() => {\n            setNotificationMessage(null);\n          }, 3000);\n        })\n        .catch(error => {\n          setErrorNotificationMessage(`Failed to add ${newName} to phonebook.`);\n          setTimeout(() => { setErrorNotificationMessage(null); }, 3000);\n        });\n    } else {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one ?`)) {\n        personService\n          .update(\n            persons\n              .filter(person => person.name === newName)\n              .map(person => person.id),\n            newPerson\n          )\n          .then(() => {\n            setPersons(persons.map(person => person.name === newName ? newPerson : person));\n            setNotificationMessage(`Updated ${newName}'s phone number to ${newNumber}`);\n            setTimeout(() => {\n              setNotificationMessage(null);\n            }, 3000);\n          })\n          .catch(error => {\n              setErrorNotificationMessage(`Information of ${newName} has already been removed from server.`);\n            setTimeout(() => {\n              setErrorNotificationMessage(null);\n            }, 3000);\n            setPersons(persons.filter(person => person.name !== newName));\n          });\n      }\n    }\n    setNewName('');\n    setNewNumber('');\n  }\n\n  const removePerson = (id) => {\n    if (window.confirm(`Delete ${persons.filter(person => person.id === id).map(person => person.name).join()} ?`)) {\n      personService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter(person => person.id !== id));\n          setNotificationMessage(`Removed ${persons.filter(person => person.id === id).map(person => person.name).join()}`);\n          setTimeout(() => {\n            setNotificationMessage(null);\n          }, 3000);\n        })\n        .catch(error => {\n          setErrorNotificationMessage(`Failed to remove ${persons.filter(person => person.id === id).map(person => person.name).join()} from database.`);\n          setTimeout(() => {\n            setErrorNotificationMessage(null);\n          }, 3000);\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} />\n      <ErrorNotification errorMessage={errorNotificationMessage} />\n      <Filter filter={newFilter} handleChange={handleFilterChange} />\n      <h3>add a new</h3>\n      <PersonForm\n        name={newName}\n        number={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        onSubmit={addOrUpdatePerson} />\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons}\n        personFilter={newFilter}\n        handleRemovePerson={removePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}